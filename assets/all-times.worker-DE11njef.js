(function(){"use strict";self.onmessage=function(i){const{type:o,files:e,precision:c}=i.data;if(o==="BUILD")try{const s=new Map,n=new Map;for(const r of e){let a;for(const f of r.lines){if(f.date&&(a=f.date),!f.timestamp)continue;const m=d(f.timestamp,c);m&&(s.has(m)?a&&!n.has(m)&&n.set(m,a):(s.set(m,new Set),a&&n.set(m,a)),s.get(m).add(r.id))}}const t={type:"SUCCESS",allTimes:Array.from(s.entries()).map(([r,a])=>{const f=n.get(r);return{timestamp:f?`${f} ${r}`:r,fileIds:Array.from(a)}}).sort((r,a)=>$(r.timestamp,a.timestamp))};self.postMessage(t)}catch(s){const n={type:"ERROR",error:s.message||"Unknown error during timeline build"};self.postMessage(n)}};function d(l,i){const o=l.split(":");if(o.length<3)return l;const e=o[0],c=o[1],s=o[2];if(i===5)return`${e}:${c}`;if(i===4){const a=s.charAt(0);return`${e}:${c}:${a}`}const n=s.split("."),u=n[0],t=n[1]||"";if(i===0)return`${e}:${c}:${u}`;const r=t.substring(0,i);return r.length>0?`${e}:${c}:${u}.${r}`:`${e}:${c}:${u}`}function $(l,i){const o=l.includes(" "),e=i.includes(" ");if(o&&e){const c=new Date(l).getTime(),s=new Date(i).getTime();if(!isNaN(c)&&!isNaN(s))return c-s}return p(l)-p(i)}function p(l){let i=l,o="";if(l.includes(" ")){const t=l.split(" ");i=t[t.length-1],o=t.slice(0,t.length-1).join(" ")}const e=i.split(":"),c=parseInt(e[0]||"0",10),s=parseInt(e[1]||"0",10);let n=0;if(e.length>2){const t=e[2];if(t.includes(".")){const[r,a]=t.split(".");n=parseInt(r,10);const f=parseFloat(`0.${a}`);n+=f}else n=parseInt(t,10)}let u=c*3600+s*60+n;if(o){const t=Date.parse(o);if(!isNaN(t))return t/1e3+u}return u}})();
